<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="action_attendance_report_report_pdf">
            <t t-call="web.html_container">
                <t t-call="atheer_hr.af_external_layout">
                    <div style="">
                        <div class="page" style="padding: 14px;">
                            <div class="col-12 mb4" style="align:center;">
                            <t t-set="company" t-value="request.env.company"/>
                            <img t-if="company.report_image2" t-att-src="image_data_uri(company.report_image2)"
                                 style="max-height: 100px;margin-left: 10%;margin-bottom: 20px;" alt="Logo"/>
                            <img t-if="company.report_image4" t-att-src="image_data_uri(company.report_image4)"
                                 style="max-height: 100px;margin-left: 15%;margin-bottom: 20px;" alt="Logo"/>
                            <img t-if="company.report_image3" t-att-src="image_data_uri(company.report_image3)"
                                 style="max-height: 100px;margin-left: 20%;margin-bottom: 20px;" alt="Logo"/>
                        </div>
                            <h2 style="font-family:'Serif Semi Bold'!important;text-align: center;margin-bottom: 40px;font-size: 28px;font-weight: bold;">
                                <b>ATTENDANCE REPORT</b>
                            </h2>
                            <br/>
                            <table width="100%" style="border:none;">
                                <tr style="border:none;">
                                    <td t-if="start_date" width="15%" style="border:none;">
                                        <strong>
                                            Start Date
                                        </strong>
                                    </td>
                                    <td t-if="start_date" style="border:none;">:
                                        <t t-esc="datetime.datetime.strptime(start_date, '%Y-%m-%d').strftime('%d-%m-%Y')"/>
                                    </td>
                                    <td t-if="end_date" width="15%" style="border:none;">
                                        <strong>
                                            End Date
                                        </strong>
                                    </td>
                                    <td t-if="end_date" style="border:none;">:
                                        <t t-esc="datetime.datetime.strptime(end_date, '%Y-%m-%d').strftime('%d-%m-%Y')"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td t-if="employee" width="15%" style="border:none;">
                                        <strong>
                                            Employee
                                        </strong>
                                    </td>
                                    <td t-if="employee" style="border:none;">:
                                        <t t-esc="employee"/>
                                    </td>
                                </tr>
                            </table>
                            <br/>
                            <table style="border-collapse: collapse;width:100%;">
                                <thead>
                                    <tr>
                                        <th style="text-align: left;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            Emp ID
                                        </th>
                                        <th style="text-align: left;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            Employee
                                        </th>
                                        <th style="text-align: left;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            Designation
                                        </th>
                                        <th style="text-align: left;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            Total
                                        </th>
                                        <th style="text-align: center;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            PR
                                        </th>
                                        <th style="text-align: center;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            Absent
                                        </th>
                                        <th style="text-align: center;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            SL
                                        </th>
                                        <th style="text-align: center;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            AL
                                        </th>
                                        <th style="text-align: right;border-top: none;border-left: none;border-right: none;border-bottom: 2px solid #ddd;">
                                            Total payable
                                            days
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="ids['data']" t-as="line">
                                        <tr>
                                            <td style="font-size:12px;text-align:left;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="line['employee_id']"/>
                                            </td>
                                            <td style="font-size:12px;text-align:left;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="line['emp_name']"/>
                                            </td>
                                            <td style="font-size:12px;text-align:left;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="line['designation']"/>
                                            </td>
                                            <td style="font-size:12px;text-align:right;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="line['total_days']"/>
                                            </td>
                                            <td style="font-size:12px;text-align:right;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="line['pr_days']"/>
                                            </td>
                                            <td style="font-size:12px;text-align:right;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="line['absent']"/>
                                            </td>
                                            <td style="font-size:12px;text-align:right;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="round(line['sick_leave'],1)"/>
                                            </td>
                                            <td style="font-size:12px;text-align:right;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="round(line['annual_leave'],1)"/>
                                            </td>
                                            <td style="font-size:12px;text-align:right;border-top:none;border-left: none;border-right: none;border-bottom:1px solid #ddd;">
                                                <t t-esc="line['total_pay_days']"/>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </t>
            </t>
        </template>

        <record id="paperformat_af" model="report.paperformat">
            <field name="name">European A4</field>
            <field name="default" eval="True"/>
            <field name="format">A4</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Landscape</field>
            <field name="margin_top">10</field>
            <field name="margin_bottom">0</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">0</field>
            <field name="dpi">90</field>
        </record>

        <record id="report_attendance_details" model="ir.actions.report">
            <field name="name">Attendance PDF Report</field>
            <field name="model">wizard.attendance.history</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">atheer_hr.action_attendance_report_report_pdf</field>
            <field name="report_file">atheer_hr.action_attendance_report_report_pdf</field>
            <field name="print_report_name">'Attendance PDF Report-%s'%(time.strftime('%d-%m-%Y'))</field>
            <field name="paperformat_id" ref="paperformat_af"/>
            <field name="binding_model_id" ref="model_wizard_attendance_history"/>
            <field name="binding_type">report</field>
        </record>

    </data>
</odoo>
