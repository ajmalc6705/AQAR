<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--Hr Employee inherit search view-->
        <record id="hr_employee_view_search_inherit" model="ir.ui.view">
            <field name="name">hr.employee.search.inherit</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="emp_id"/>
                </xpath>
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="string">Name</attribute>
                </xpath>
                <xpath expr="//field[@name='job_id']" position="after">
                    <filter domain="[('employee_category', '=', 'omani_staff')]" name="employee_category"
                            string="Omani Staff"/>
                    <filter domain="[('employee_category', '=', 'omani_labor')]" name="employee_category"
                            string="Omani Labor"/>
                    <filter domain="[('employee_category', '=', 'expat_staff')]" name="employee_category"
                            string="Expat Staff"/>
                    <filter domain="[('employee_category', '=', 'expat_labor')]" name="employee_category"
                            string="Expat Labor"/>
                    <separator/>
                    <filter string="Employee Category" name='employee_category'
                            context="{'group_by':'employee_category'}"/>
                </xpath>
            </field>
        </record>

        <record id="view_hr_employee_tree_view" model="ir.ui.view">
            <field name="name">hr.employee.tree</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="before">
                    <field name="emp_id"/>
                </xpath>
                <xpath expr="//tree" position="attributes">
                    <attribute name="default_order">emp_id asc</attribute>
                </xpath>
            </field>
        </record>

        <record id="view_hr_employee_form" model="ir.ui.view">
            <field name="name">hr.employee.form</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="priority" eval="26"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@name='button_box']" position="inside">
                    <button name="action_view_airtickets"
                            class="oe_stat_button" type="object"
                            icon="fa-ticket">
                        <field name="airticket_count" widget="statinfo" string="airticket"/>
                    </button>
                </xpath>

                <xpath expr="//h1[hasclass('d-flex')]" position="before">
                    <h2 class="d-flex">
                        <field name="emp_id" force_save="1" placeholder="Employee ID" readonly="1"/>
                    </h2>
                </xpath>
                <xpath expr="//field[@name='pin']" position="before">
                    <field name="ot_eligibility" force_save="1"/>
                    <field name="ph_ot_eligibility" force_save="1"/>
                </xpath>
                <xpath expr="//field[@name='job_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='passport_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='department_id']" position="attributes">
                    <attribute name="widget">selection</attribute>
                </xpath>
                <xpath expr="//field[@name='parent_id']" position="attributes">
                    <attribute name="options">{'no_create': True, 'no_create_edit': True}</attribute>
                </xpath>
                <xpath expr="//field[@name='job_title']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='job_id']" position="after">
                    <field name="employee_job_arabic"/>
                </xpath>
                <xpath expr="//div[hasclass('oe_title')]" position="inside">
                    <h2>
                        <field name="employee_name_arabic" placeholder="موظف"/>
                    </h2>
                </xpath>
                <xpath expr="//field[@name='category_ids']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='coach_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//group[4]" position="after">
                    <group string="Resignation">
                        <group>
                            <field name="applicable_date" force_save="1"/>
                            <field name="travel_date" force_save="1"/>
                            <field name="gratuity_amount" force_save="1"/>
                        </group>
                    </group>
                </xpath>
                <!--                Gratiuity fields-->
                <xpath expr="//page[@name='personal_information']" position="inside">
                    <group name='gratiuity_details'>
                        <group string="Gratiuity">
                            <field name="is_eligible_for_gratiuity"/>
                            <field name="last_gratiuity_encashed_date"
                                   attrs="{'invisible': [('is_eligible_for_gratiuity', '=', False)]}"/>
                            <field name="current_gratiuity_amount"
                                   attrs="{'invisible': [('is_eligible_for_gratiuity', '=', False)]}"/>
                        </group>
                        <group name="mess_facility" string="Mess Facility">
                            <field name="mess_facility"/>
                        </group>

                    </group>

                </xpath>
                <xpath expr="//field[@name='parent_id']" position="after">
                    <field name="employee_category"/>
                    <field name="air_sector_id"/>
                    <field name="provision_grade_id"/>
                </xpath>

                <header position="inside">
                    <field name="employee_status" attrs="{'invisible': ['|',('active', '=', False),('id', '=', False)]}"
                           widget="statusbar" options="{'clickable': '1', 'fold_field': 'fold'}"/>
                </header>
                <field name="work_location_id" position="after">
                    <field name="site_joining_date"/>
                </field>
                <field name="department_id" position="before">
                    <field name="job_id" string="Job Title" options="{'no_create': True, 'no_create_edit':True}"/>
                </field>
                <field name="department_id" position="after">
                    <field name="reporting_department" options="{'no_quick_create': True, 'no_create_edit' : False}"
                           string="Section"/>
                    <field name="emp_check" invisible="1"/>
                </field>
                <field name="birthday" position="after">
                    <field name="age" force_save="True"/>
                    <field name="is_omani" string="Is omani"/>
                    <field name="pasi_no" string="PASI No"
                           attrs="{'invisible': [('is_omani', '=', 'expat')],'required': [('is_omani', '=', 'omani')],}"/>
                    <field name="blood_group_id"/>
                </field>
                <field name="address_home_id" position="after">
                    <field name="address_home_country_id" context="{
                                                'show_address': 1,
                                                'default_type': 'private',
                                                'form_view_ref': 'base.res_partner_view_form_private'}"
                           options='{"always_reload": True, "highlight_first_line": True}'/>
                </field>
                <xpath expr="//page[@name='public']/div/div/group" position="before">
                    <group string="Joining Date">
                        <field name="joining_date"/>
                        <field name="joining_salary" invisible="1"/>
                    </group>
                </xpath>
                <xpath expr="//group[@name='managers']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='bank_account_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='pin']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='gender']" position="after">
                    <field name="religion"/>
                </xpath>
                <xpath expr="//page[@name='hr_settings']" position="after">
                    <page string="Training">
                        <field name="traning_analysis_ids">
                            <tree editable="bottom">
                                <field name="course_title"/>
                                <field name="date_taken"/>
                                <field name="date_expiry"/>
                            </tree>
                        </field>
                    </page>

                </xpath>
                <xpath expr="//page[@name='personal_information']" position="inside">
                    <group string="Civil Card Details" name='civil_card_details'>
                        <group>
                            <field name="civil_card_no"/>
                            <field name="civil_card_designation"/>
                            <field name="civil_card_expire_date"/>
                        </group>
                    </group>
                </xpath>
                <xpath expr="//page[@name='personal_information']" position="after">
                    <page string="Documents">
                        <field name="employee_docs">
                            <tree editable="bottom" decoration-danger="exp_date&lt;current_date">
                                <!--                                <field name="type"/>-->
                                <field name="doc_type"/>
                                <field name="relation_id"
                                       attrs="{'readonly': [('doc_type', '!=', 'relative')],
                                       'required': [('doc_type', '=', 'relative')]}"/>
                                <field name="name"/>
                                <field name="doc_id"/>
                                <field name="exp_date"/>
                                <field name="file_name" invisible="0" readonly="True" force_save="1"/>
                                <field name="attachment" filename="file_name" widget="binary"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Leave History">
                        <group col="4">
                            <field name="annual_leave_last_reco"/>
                            <field name="open_blnc"/>
                        </group>
                        <field name="leave_history_ids">
                            <tree create="false">
                                <field name="employee_id" invisible="1"/>
                                <field name="department_id" invisible="1"/>
                                <field name="holiday_type" invisible="1"/>
                                <field name="holiday_status_id" string="Leave Type" class="font-weight-bold"/>
                                <field name="name" invisible="1"/>
                                <field name="date_from"/>
                                <field name="date_to"/>
                                <field name="number_of_days" string="Duration"/>
                                <field name="state" invisible="1"/>
                                <field name="category_id" invisible="1"/>
                                <field name="user_id" invisible="1"/>
                            </tree>
                        </field>
                    </page>

                </xpath>
                <!--                <xpath expr="//page[@name='personal_information']/group/group[6]" position="replace">-->
                <!--                </xpath>-->
                <field name="visa_no" position="replace"/>
                <field name="visa_expire" position="replace"/>
                <page name='personal_information' position="inside">
                    <group>
                        <group string="Visa Details">
                            <field name="visa_no"/>
                            <field name="visa_duration"
                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])]}"/>
                            <field name="visa_start_date"/>
                            <field name="visa_expire"
                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])]}"/>
                            <field name="visa_cost"/>
                            <field name="visa_company_id"
                                   options="{'no_quick_create': True, 'no_create_edit' : False}"/>
                        </group>
                        <group string="Passport Details">
                            <field name="passport_no"
                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])]}"/>
                            <field name="passport_place_of_issue"/>
                            <field name="passport_issued_date"/>
                            <field name="passport_expiry_date"
                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])]}"/>
                        </group>
                        <group string="Bank Details">
                            <field name="bank_account_id"
                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])],'readonly':[('salary_assignment_issued','=',True)]}"/>
                            <field name="acc_holder_name"
                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])],'readonly':[('salary_assignment_issued','=',True)]}"/>
                            <!--                         <field name="bank_account"-->
                            <!--                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])],'readonly':[('salary_assignment_issued','=',True)]}"/>-->
                            <field name="bank_id"
                                   attrs="{'required':[('employee_category','in',['expat_staff','expat_labor'])],'readonly':[('salary_assignment_issued','=',True)]}"/>
                            <field name="bank_branch"/>
                        </group>
                    </group>
                </page>
            </field>
        </record>

        <record id="view_hr_employee_relatives_form" model="ir.ui.view">
            <field name="name">hr.employee.form</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr_employee_relative.hr_employee_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='relative_details']" position='after'>
                    <page string="Air Ticket Eligibility">
                        <field name="airticket_line_ids">
                            <tree editable="bottom">
                                <field name="relative_id" required="1"/>
                                <field name="relation_id"/>
                                <field name="start_date"/>
                                <field name="end_date"/>
                                <field name="ticket_qty"/>
                                <field name="amount_per_ticket"/>
                                <field name="no_of_ticket"/>
                                <field name="employee_id" invisible="1"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
            </field>
        </record>

        <record id="view_hr_holidays_summary_employee_inherit" model="ir.ui.view">
            <field name="name">hr.holidays.summary.employee.form</field>
            <field name="model">hr.holidays.summary.employee</field>
            <field name="inherit_id" ref="hr_holidays.view_hr_holidays_summary_employee"/>
            <field name="arch" type="xml">
                <xpath expr="//form" position="attributes">
                    <attribute name="string">Leave Summary</attribute>
                </xpath>
                <xpath expr="//field[@name='holiday_type']" position="attributes">
                    <attribute name="string">Status</attribute>
                </xpath>
            </field>
        </record>

        <record id="hr_holidays.action_hr_holidays_summary_employee" model="ir.actions.act_window">
            <field name="name">Leave Summary</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.holidays.summary.employee</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="binding_model_id" ref="hr.model_hr_employee"/>
            <field name="binding_type">report</field>
        </record>
        <!--        Menu for Provision Grade-->
        <record id="provision_grade_tree_view" model="ir.ui.view">
            <field name="name">provision.grade.view.tree</field>
            <field name="model">provision.grade</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="grade_seq"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="action_hr_provision_grade" model="ir.actions.act_window">
            <field name="name">Provision Grade</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">provision.grade</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem
                id="menu_provision_grade"
                name="Provision Garde"
                action="action_hr_provision_grade"
                parent="hr.menu_human_resources_configuration"
                sequence="7"
        />
        <!--        Menu for AirSector-->
        <record id="airsector_tree_view" model="ir.ui.view">
            <field name="name">airsector.view.tree</field>
            <field name="model">air.sector</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="air_sector_seq"/>
                    <field name="name"/>
                    <field name="from_destination"/>
                    <field name="to_destination"/>
                    <field name="full_fare"/>
                    <field name="employee_id"/>
                </tree>
            </field>
        </record>
        <record id="action_hr_airsector" model="ir.actions.act_window">
            <field name="name">AirSector</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">air.sector</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem
                id="menu_airsector"
                name="AirSector"
                action="action_hr_airsector"
                parent="hr.menu_human_resources_configuration"
                sequence="6"
        />
        <!--        Menu for Dependentants-->
        <record id="action_hr_dependents" model="ir.actions.act_window">
            <field name="name">Airticket Dependents</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">air.ticket.line</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem
                id="menu_dependents"
                name="Dependents Airticket"
                action="action_hr_dependents"
                parent="hr.menu_human_resources_configuration"
                sequence="5"
        />

        <!--        Checklist-->
        <record id="checklist_tree_view" model="ir.ui.view">
            <field name="name">checklist.view.tree</field>
            <field name="model">employee.checklist</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="checklist_seq"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="action_hr_checklist" model="ir.actions.act_window">
            <field name="name">Employee Checklist</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">employee.checklist</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem
                id="menu_checklist"
                name="Employee Checklist"
                action="action_hr_checklist"
                parent="hr.menu_human_resources_configuration"
                sequence="8"
        />
    </data>
</odoo>
